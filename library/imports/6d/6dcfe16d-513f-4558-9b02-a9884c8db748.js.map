{"version":3,"sources":["assets\\scripts\\arrow\\controller\\Direction-Controller.js"],"names":["cc","Class","Component","properties","onTouchMove","eventTouch","w_pos","getLocation","pos","node","convertToNodeSpaceAR","len","mag","disc_r","x","y","stick","setPosition","_getPlayer","setDir","onTouchEnd","v2","attack","onLoad","disc","getChildByName","width","on","Node","EventType","TOUCH_START","TOUCH_MOVE","TOUCH_END","TOUCH_CANCEL","start","_getPlayerNode","getComponent","player"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE,EAHP;AAMLC,EAAAA,WANK,uBAMOC,UANP,EAMmB;AACpB,QAAIC,KAAK,GAAGD,UAAU,CAACE,WAAX,EAAZ;AACA,QAAIC,GAAG,GAAG,KAAKC,IAAL,CAAUC,oBAAV,CAA+BJ,KAA/B,CAAV;AACA,QAAIK,GAAG,GAAGH,GAAG,CAACI,GAAJ,EAAV;;AACA,QAAID,GAAG,GAAG,KAAKE,MAAf,EAAuB;AACnBL,MAAAA,GAAG,CAACM,CAAJ,GAAQ,KAAKD,MAAL,GAAcL,GAAG,CAACM,CAAlB,GAAsBH,GAA9B;AACAH,MAAAA,GAAG,CAACO,CAAJ,GAAQ,KAAKF,MAAL,GAAcL,GAAG,CAACO,CAAlB,GAAsBJ,GAA9B;AACH;;AACD,SAAKK,KAAL,CAAWC,WAAX,CAAuBT,GAAvB;;AACA,SAAKU,UAAL,GAAkBC,MAAlB,CAAyBX,GAAzB;AACH,GAhBI;AAkBLY,EAAAA,UAlBK,sBAkBMf,UAlBN,EAkBkB;AACnB,SAAKW,KAAL,CAAWC,WAAX,CAAuBjB,EAAE,CAACqB,EAAH,CAAM,CAAN,EAAS,CAAT,CAAvB;;AACA,SAAKH,UAAL,GAAkBI,MAAlB;AACH,GArBI;AAuBLC,EAAAA,MAvBK,oBAuBK;AACN,SAAKC,IAAL,GAAY,KAAKf,IAAL,CAAUgB,cAAV,CAAyB,MAAzB,CAAZ;AACA,SAAKT,KAAL,GAAa,KAAKP,IAAL,CAAUgB,cAAV,CAAyB,OAAzB,CAAb;AACA,SAAKZ,MAAL,GAAc,KAAKW,IAAL,CAAUE,KAAV,GAAkB,CAAhC;AACA,SAAKF,IAAL,CAAUG,EAAV,CAAa3B,EAAE,CAAC4B,IAAH,CAAQC,SAAR,CAAkBC,WAA/B,EAA4C,KAAK1B,WAAjD,EAA8D,IAA9D;AACA,SAAKoB,IAAL,CAAUG,EAAV,CAAa3B,EAAE,CAAC4B,IAAH,CAAQC,SAAR,CAAkBE,UAA/B,EAA2C,KAAK3B,WAAhD,EAA6D,IAA7D;AACA,SAAKoB,IAAL,CAAUG,EAAV,CAAa3B,EAAE,CAAC4B,IAAH,CAAQC,SAAR,CAAkBG,SAA/B,EAA0C,KAAKZ,UAA/C,EAA2D,IAA3D;AACA,SAAKI,IAAL,CAAUG,EAAV,CAAa3B,EAAE,CAAC4B,IAAH,CAAQC,SAAR,CAAkBI,YAA/B,EAA6C,KAAKb,UAAlD,EAA8D,IAA9D;AACH,GA/BI;AAiCLc,EAAAA,KAjCK,mBAiCI,CACR,CAlCI;AAoCL;AAEAC,EAAAA,cAtCK,4BAsCY;AACb,WAAO,KAAK1B,IAAL,CAAU2B,YAAV,CAAuB,YAAvB,EAAqCC,MAA5C;AACH,GAxCI;AAyCLnB,EAAAA,UAzCK,wBAyCQ;AACT,WAAO,KAAKT,IAAL,CAAU2B,YAAV,CAAuB,YAAvB,EAAqCC,MAArC,CAA4CD,YAA5C,CAAyD,aAAzD,CAAP;AACH;AA3CI,CAAT","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n    },\n\n    onTouchMove(eventTouch) {\n        var w_pos = eventTouch.getLocation();\n        var pos = this.node.convertToNodeSpaceAR(w_pos);\n        var len = pos.mag();\n        if (len > this.disc_r) {\n            pos.x = this.disc_r * pos.x / len;\n            pos.y = this.disc_r * pos.y / len;\n        }\n        this.stick.setPosition(pos);\n        this._getPlayer().setDir(pos);\n    },\n\n    onTouchEnd(eventTouch) {\n        this.stick.setPosition(cc.v2(0, 0));\n        this._getPlayer().attack();\n    },\n\n    onLoad () {\n        this.disc = this.node.getChildByName(\"disc\");\n        this.stick = this.node.getChildByName(\"stick\");\n        this.disc_r = this.disc.width / 2;\n        this.disc.on(cc.Node.EventType.TOUCH_START, this.onTouchMove, this);\n        this.disc.on(cc.Node.EventType.TOUCH_MOVE, this.onTouchMove, this);\n        this.disc.on(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this);\n        this.disc.on(cc.Node.EventType.TOUCH_CANCEL, this.onTouchEnd, this);\n    },\n\n    start () {\n    },\n\n    // update (dt) {},\n\n    _getPlayerNode() {\n        return this.node.getComponent(\"Controller\").player;\n    },\n    _getPlayer() {\n        return this.node.getComponent(\"Controller\").player.getComponent(\"ArrowPlayer\");\n    },\n});\n"]}