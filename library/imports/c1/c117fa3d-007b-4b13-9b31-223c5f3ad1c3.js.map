{"version":3,"sources":["assets\\scripts\\defense\\Obstacle.js"],"names":["cc","Class","Component","properties","onLoad","node","on","Node","EventType","TOUCH_MOVE","event","active","opacity","delta","touch","getDelta","x","y","TOUCH_END","index","game","getGridIndex","position","i","j","log","map","getGridPos","updateMonsterPath","v2","originPos","start"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE,EAHP;AAML;AAEAC,EAAAA,MARK,oBAQK;AAAA;;AACN,SAAKC,IAAL,CAAUC,EAAV,CAAaN,EAAE,CAACO,IAAH,CAAQC,SAAR,CAAkBC,UAA/B,EAA2C,UAAAC,KAAK,EAAI;AAChD,UAAI,KAAI,CAACC,MAAT,EAAiB;AACb;AACH;;AACD,MAAA,KAAI,CAACC,OAAL,GAAe,EAAf;AACA,UAAIC,KAAK,GAAGH,KAAK,CAACI,KAAN,CAAYC,QAAZ,EAAZ;AACA,MAAA,KAAI,CAACV,IAAL,CAAUW,CAAV,IAAeH,KAAK,CAACG,CAArB;AACA,MAAA,KAAI,CAACX,IAAL,CAAUY,CAAV,IAAeJ,KAAK,CAACI,CAArB;AACH,KARD,EAQG,KAAKZ,IARR;AASA,SAAKA,IAAL,CAAUC,EAAV,CAAaN,EAAE,CAACO,IAAH,CAAQC,SAAR,CAAkBU,SAA/B,EAA0C,YAAM;AAC5C,UAAI,KAAI,CAACP,MAAT,EAAiB;AACb;AACH;;AACD,MAAA,KAAI,CAACC,OAAL,GAAe,GAAf;;AACA,UAAIO,KAAK,GAAG,KAAI,CAACC,IAAL,CAAUC,YAAV,CAAuB,KAAI,CAAChB,IAAL,CAAUiB,QAAjC,CAAZ;;AACA,UAAIC,CAAC,GAAGJ,KAAK,CAACH,CAAd;AACA,UAAIQ,CAAC,GAAGL,KAAK,CAACF,CAAd;AACAjB,MAAAA,EAAE,CAACyB,GAAH,CAAO,aAAaD,CAAb,GAAiB,IAAjB,GAAwBD,CAA/B;;AACA,UAAI,KAAI,CAACH,IAAL,CAAUM,GAAV,CAAcH,CAAd,EAAiBC,CAAjB,MAAwB,CAA5B,EAA+B;AAC3BxB,QAAAA,EAAE,CAACyB,GAAH,CAAO,aAAaD,CAAb,GAAiB,IAAjB,GAAwBD,CAA/B;AACA,QAAA,KAAI,CAAClB,IAAL,CAAUiB,QAAV,GAAqB,KAAI,CAACF,IAAL,CAAUO,UAAV,CAAqBJ,CAArB,EAAwBC,CAAxB,CAArB;AACA,QAAA,KAAI,CAACJ,IAAL,CAAUM,GAAV,CAAcH,CAAd,EAAiBC,CAAjB,IAAsB,CAAtB;;AACA,QAAA,KAAI,CAACJ,IAAL,CAAUQ,iBAAV;;AACA,QAAA,KAAI,CAACjB,MAAL,GAAc,IAAd;AACH,OAND,MAMO;AACH,QAAA,KAAI,CAACN,IAAL,CAAUiB,QAAV,GAAqBtB,EAAE,CAAC6B,EAAH,CAAM,KAAI,CAACC,SAAX,CAArB;AACA9B,QAAAA,EAAE,CAACyB,GAAH,CAAO,iBAAiB,KAAI,CAACK,SAA7B;AACH;AACJ,KAnBD,EAmBG,KAAKzB,IAnBR;AAoBH,GAtCI;AAwCL0B,EAAAA,KAxCK,mBAwCI;AACL,SAAKD,SAAL,GAAiB9B,EAAE,CAAC6B,EAAH,CAAM,KAAKxB,IAAL,CAAUiB,QAAhB,CAAjB;AACH,GA1CI,CA4CL;;AA5CK,CAAT","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, event => {\n            if (this.active) {\n                return;\n            }\n            this.opacity = 50;\n            var delta = event.touch.getDelta();\n            this.node.x += delta.x;\n            this.node.y += delta.y;\n        }, this.node);\n        this.node.on(cc.Node.EventType.TOUCH_END, () => {\n            if (this.active) {\n                return;\n            }\n            this.opacity = 255;\n            var index = this.game.getGridIndex(this.node.position);\n            var i = index.x;\n            var j = index.y;\n            cc.log(\"result: \" + j + \"\\t\" + i);\n            if (this.game.map[i][j] === 0) {\n                cc.log(\"result: \" + j + \"\\t\" + i);\n                this.node.position = this.game.getGridPos(i, j);\n                this.game.map[i][j] = 1;\n                this.game.updateMonsterPath();\n                this.active = true;\n            } else {\n                this.node.position = cc.v2(this.originPos);\n                cc.log(\"origin pos: \" + this.originPos);\n            }\n        }, this.node);\n    },\n\n    start () {\n        this.originPos = cc.v2(this.node.position);\n    },\n\n    // update (dt) {},\n});\n"]}